# ============================================
# VistralAI Environment Configuration
# ============================================
# Copy this file to .env.local and fill in your values
# This file should NOT be committed to git

# ============================================
# NEXTAUTH Configuration (Required)
# ============================================

# Base URL for authentication callbacks
# Development: http://localhost:3000
# Production: https://your-app.run.app
NEXTAUTH_URL=http://localhost:3000

# Secret for signing tokens (generate with: openssl rand -base64 32)
NEXTAUTH_SECRET=your-secret-here-generate-with-openssl

# ============================================
# Feature Flags (Enable/Disable Features)
# ============================================

# Enable Firecrawl for real website crawling
# false = use mock WebCrawler (MVP)
# true = use real Firecrawl service
USE_FIRECRAWL=false

# Job processing uses in-memory queue
# (Bull + Redis support has been removed)

# Enable real Claude API calls
# false = use mock data generators (MVP)
# true = use real Anthropic Claude API
USE_REAL_API=false

# ============================================
# OpenAI API Configuration (Recommended)
# ============================================

# OpenAI API key for GPT-4o-mini (recommended for cost efficiency)
# Get from: https://platform.openai.com/api-keys
# If set, will be used instead of Claude for brand intelligence extraction
# Only required if USE_REAL_API=true
OPENAI_API_KEY=sk-your-openai-api-key-here

# OpenAI model to use (default: gpt-4o-mini)
# gpt-4o-mini is 80% cheaper than Claude for this use case
OPENAI_MODEL=gpt-4o-mini

# ============================================
# Claude API Configuration (Fallback)
# ============================================

# Anthropic Claude API key
# Get from: https://console.anthropic.com/account/keys
# Used as fallback if OPENAI_API_KEY is not set
# Only required if USE_REAL_API=true
ANTHROPIC_API_KEY=sk-ant-your-api-key-here

# Claude model to use for extraction
# Recommended: claude-sonnet-4-20250514 (fastest, cheapest)
CLAUDE_MODEL=claude-sonnet-4-20250514

# ============================================
# Queue Configuration
# ============================================
# Uses in-memory job queue (no Redis required)

# ============================================
# Firecrawl Configuration
# ============================================

# Internal URL for self-hosted Firecrawl service
# Local (docker-compose): http://localhost:3002
# Production (Cloud Run): http://firecrawl-service:3000
# Only required if USE_FIRECRAWL=true
FIRECRAWL_INTERNAL_URL=http://localhost:3002

# Maximum crawl depth (homepage + N levels)
FIRECRAWL_MAX_DEPTH=2

# Maximum pages to crawl per domain
FIRECRAWL_MAX_PAGES=20

# Crawl timeout in milliseconds
FIRECRAWL_TIMEOUT_MS=30000

# ============================================
# Extraction Configuration
# ============================================

# Confidence threshold for review queue
# Extractions below this confidence trigger manual review
# Range: 0.0 - 1.0
# Recommended: 0.85 (85%)
CONFIDENCE_THRESHOLD=0.85

# ============================================
# Database Configuration (Future)
# ============================================

# Database connection URL (when migrating from mock)
# PostgreSQL recommended: postgresql://user:password@localhost:5432/vistralai
# DATABASE_URL=postgresql://user:password@localhost:5432/vistralai

# ============================================
# Google Cloud Configuration (Production)
# ============================================

# GCP Project ID
GCP_PROJECT_ID=vistralai

# GCP Region for Cloud Run services
GCP_REGION=us-central1

# ============================================
# Development Settings
# ============================================

# Next.js environment
NODE_ENV=development

# Enable verbose logging
DEBUG=vistralai:*

# ============================================
# Notes for Different Environments
# ============================================

# DEVELOPMENT (Local with Mocks):
# - All feature flags: false
# - No API keys needed
# - Use for rapid iteration

# DEVELOPMENT (Local with Real Services):
# - USE_FIRECRAWL=true (run docker-compose up)
# - USE_BULL_QUEUE=true (requires Redis)
# - USE_REAL_API=true (requires ANTHROPIC_API_KEY)
# - Need docker-compose.yml with Firecrawl and Redis

# PRODUCTION:
# - All feature flags: true
# - All API keys in Secret Manager
# - NEXTAUTH_SECRET in Secret Manager
# - REDIS_URL: Cloud Memorystore connection
# - FIRECRAWL_INTERNAL_URL: Cloud Run internal DNS

# ============================================
# Migration from Mock to Production
# ============================================

# Step 1: Test with Firecrawl only
# USE_FIRECRAWL=true
# USE_BULL_QUEUE=false
# USE_REAL_API=false

# Step 2: Add Bull Queue
# USE_FIRECRAWL=true
# USE_BULL_QUEUE=true
# USE_REAL_API=false

# Step 3: Enable Claude API
# USE_FIRECRAWL=true
# USE_BULL_QUEUE=true
# USE_REAL_API=true
