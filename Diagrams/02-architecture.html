<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>VistralAI - System Architecture</title>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: "Inter", -apple-system, BlinkMacSystemFont, sans-serif; }
  </style>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
    const { useState } = React;



const Component = () => {
  return (
    <div style={{
      minHeight: '100vh',
      background: 'linear-gradient(180deg, #0C0F1A 0%, #131825 50%, #0C0F1A 100%)',
      padding: '40px 24px',
      fontFamily: "'Inter', -apple-system, BlinkMacSystemFont, sans-serif"
    }}>
      <div style={{ textAlign: 'center', marginBottom: '40px' }}>
        <h1 style={{ fontSize: '32px', fontWeight: '700', color: '#F8FAFC', margin: '0 0 8px 0' }}>
          VistralAI System Architecture
        </h1>
        <p style={{ fontSize: '14px', color: '#64748B', margin: 0 }}>
          Full-stack architecture with caching, real-time updates, and AI services
        </p>
      </div>

      <div style={{ maxWidth: '1400px', margin: '0 auto' }}>
        {/* External Users */}
        <div style={{ display: 'flex', justifyContent: 'center', gap: '24px', marginBottom: '24px' }}>
          <div style={{
            background: 'linear-gradient(135deg, #1E40AF 0%, #3B82F6 100%)',
            borderRadius: '12px',
            padding: '16px 24px',
            textAlign: 'center',
            boxShadow: '0 4px 24px rgba(59, 130, 246, 0.3)'
          }}>
            <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="white" strokeWidth="1.5" style={{ margin: '0 auto 8px', display: 'block' }}>
              <circle cx="12" cy="12" r="10" />
              <line x1="2" y1="12" x2="22" y2="12" />
              <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z" />
            </svg>
            <div style={{ color: 'white', fontWeight: '600', fontSize: '14px' }}>Browser Client</div>
            <div style={{ color: '#93C5FD', fontSize: '11px' }}>HTTPS</div>
          </div>
          <div style={{
            background: 'linear-gradient(135deg, #7C3AED 0%, #8B5CF6 100%)',
            borderRadius: '12px',
            padding: '16px 24px',
            textAlign: 'center',
            boxShadow: '0 4px 24px rgba(139, 92, 246, 0.3)'
          }}>
            <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="white" strokeWidth="1.5" style={{ margin: '0 auto 8px', display: 'block' }}>
              <path d="M5 12h14M12 5l7 7-7 7" />
            </svg>
            <div style={{ color: 'white', fontWeight: '600', fontSize: '14px' }}>WebSocket Client</div>
            <div style={{ color: '#C4B5FD', fontSize: '11px' }}>Real-time updates</div>
          </div>
        </div>

        <div style={{ display: 'flex', justifyContent: 'center', marginBottom: '16px' }}>
          <div style={{ width: '2px', height: '24px', background: 'linear-gradient(to bottom, #3B82F6, #475569)' }} />
        </div>

        {/* Main Grid */}
        <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '24px', marginBottom: '24px' }}>
          {/* Frontend Layer */}
          <div style={{
            background: '#1A1F2E',
            borderRadius: '16px',
            border: '1px solid #3B82F6',
            padding: '20px',
            gridColumn: '1 / -1'
          }}>
            <div style={{ color: '#3B82F6', fontSize: '12px', fontWeight: '700', letterSpacing: '1px', marginBottom: '16px' }}>
              FRONTEND LAYER
            </div>
            <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(180px, 1fr))', gap: '12px' }}>
              {[
                { name: 'Next.js 14', desc: 'App Router, React 18', color: '#000' },
                { name: 'React Query', desc: 'Client cache, 5min stale', color: '#FF4154' },
                { name: 'Socket.io Client', desc: 'Auto-reconnect, rooms', color: '#010101' },
                { name: 'Lazy Components', desc: 'QuadrantChart, Galaxy', color: '#8B5CF6' },
                { name: 'Performance Hooks', desc: 'Debounce, Throttle', color: '#10B981' },
                { name: 'Theme System', desc: 'Morning/Evening/Night', color: '#F59E0B' }
              ].map((item) => (
                <div key={item.name} style={{
                  background: '#0F172A',
                  borderRadius: '8px',
                  padding: '12px',
                  borderLeft: `3px solid ${item.color}`
                }}>
                  <div style={{ color: '#E2E8F0', fontSize: '12px', fontWeight: '600' }}>{item.name}</div>
                  <div style={{ color: '#64748B', fontSize: '10px' }}>{item.desc}</div>
                </div>
              ))}
            </div>
          </div>

          {/* API Layer */}
          <div style={{
            background: '#1A1F2E',
            borderRadius: '16px',
            border: '1px solid #10B981',
            padding: '20px'
          }}>
            <div style={{ color: '#10B981', fontSize: '12px', fontWeight: '700', letterSpacing: '1px', marginBottom: '16px' }}>
              API LAYER
            </div>
            <div style={{ display: 'flex', flexDirection: 'column', gap: '10px' }}>
              <div style={{ background: '#0F172A', borderRadius: '8px', padding: '12px' }}>
                <div style={{ color: '#E2E8F0', fontSize: '12px', fontWeight: '600' }}>Next.js API Routes</div>
                <div style={{ color: '#64748B', fontSize: '10px' }}>43 endpoints</div>
              </div>
              <div style={{ color: '#94A3B8', fontSize: '10px', fontWeight: '600', marginTop: '8px' }}>MIDDLEWARE STACK</div>
              {['withErrorHandler', 'withAuth', 'withRateLimit'].map((mw) => (
                <code key={mw} style={{
                  background: '#0F172A',
                  color: '#10B981',
                  padding: '6px 10px',
                  borderRadius: '6px',
                  fontSize: '11px'
                }}>{mw}()</code>
              ))}
              <div style={{ background: '#8B5CF620', borderRadius: '8px', padding: '12px', marginTop: '8px' }}>
                <div style={{ color: '#8B5CF6', fontSize: '12px', fontWeight: '600' }}>Socket.io Server</div>
                <div style={{ color: '#64748B', fontSize: '10px' }}>Room subscriptions per brand360Id</div>
              </div>
            </div>
          </div>

          {/* Services Layer */}
          <div style={{
            background: '#1A1F2E',
            borderRadius: '16px',
            border: '1px solid #8B5CF6',
            padding: '20px'
          }}>
            <div style={{ color: '#8B5CF6', fontSize: '12px', fontWeight: '700', letterSpacing: '1px', marginBottom: '16px' }}>
              SERVICES LAYER
            </div>
            <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '8px' }}>
              {[
                { name: 'BrandIntelligence', desc: 'GPT-4o-mini' },
                { name: 'WebCrawler', desc: 'Firecrawl' },
                { name: 'MagicImportOrchestrator', desc: 'Coordinator' },
                { name: 'CrawlerAgent', desc: 'Schema.org' },
                { name: 'VibeCheckAgent', desc: 'Personality' },
                { name: 'CompetitorAgent', desc: 'Discovery' },
                { name: 'PerceptionEvaluator', desc: 'LLM-as-Judge' }
              ].map((svc) => (
                <div key={svc.name} style={{
                  background: '#0F172A',
                  borderRadius: '6px',
                  padding: '8px 10px'
                }}>
                  <div style={{ color: '#E2E8F0', fontSize: '11px', fontWeight: '500' }}>{svc.name}</div>
                  <div style={{ color: '#64748B', fontSize: '9px' }}>{svc.desc}</div>
                </div>
              ))}
            </div>
          </div>
        </div>

        {/* Caching Layer */}
        <div style={{
          background: 'linear-gradient(90deg, #DC2626 0%, #EF4444 50%, #F97316 100%)',
          borderRadius: '16px',
          padding: '20px',
          marginBottom: '24px'
        }}>
          <div style={{ color: 'white', fontSize: '12px', fontWeight: '700', letterSpacing: '1px', marginBottom: '16px' }}>
            CACHING LAYER
          </div>
          <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))', gap: '12px' }}>
            <div style={{ background: 'rgba(255,255,255,0.15)', borderRadius: '10px', padding: '14px' }}>
              <div style={{ color: 'white', fontSize: '13px', fontWeight: '600' }}>Redis 7</div>
              <div style={{ color: '#FED7AA', fontSize: '10px', marginTop: '4px' }}>256MB, LRU eviction</div>
            </div>
            <div style={{ background: 'rgba(255,255,255,0.15)', borderRadius: '10px', padding: '14px' }}>
              <div style={{ color: 'white', fontSize: '13px', fontWeight: '600' }}>Cache Key Factory</div>
              <div style={{ color: '#FED7AA', fontSize: '10px', marginTop: '4px' }}>brand360, perception, etc.</div>
            </div>
            <div style={{ background: 'rgba(255,255,255,0.15)', borderRadius: '10px', padding: '14px' }}>
              <div style={{ color: 'white', fontSize: '13px', fontWeight: '600' }}>TTL Presets</div>
              <div style={{ color: '#FED7AA', fontSize: '10px', marginTop: '4px' }}>1min, 5min, 15min, 1hr</div>
            </div>
            <div style={{ background: 'rgba(255,255,255,0.15)', borderRadius: '10px', padding: '14px' }}>
              <div style={{ color: 'white', fontSize: '13px', fontWeight: '600' }}>React Query</div>
              <div style={{ color: '#FED7AA', fontSize: '10px', marginTop: '4px' }}>Client-side, gcTime: 30min</div>
            </div>
          </div>
        </div>

        {/* Database & External Services */}
        <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '24px', marginBottom: '24px' }}>
          {/* Database */}
          <div style={{
            background: '#1A1F2E',
            borderRadius: '16px',
            border: '1px solid #22C55E',
            padding: '20px'
          }}>
            <div style={{ color: '#22C55E', fontSize: '12px', fontWeight: '700', letterSpacing: '1px', marginBottom: '16px' }}>
              DATABASE LAYER
            </div>
            <div style={{
              background: 'linear-gradient(135deg, #166534 0%, #22C55E 100%)',
              borderRadius: '10px',
              padding: '14px',
              marginBottom: '12px'
            }}>
              <div style={{ color: 'white', fontSize: '14px', fontWeight: '600' }}>MongoDB 7.0</div>
              <div style={{ color: '#BBF7D0', fontSize: '11px' }}>Replica set for Prisma transactions</div>
            </div>
            <div style={{ color: '#94A3B8', fontSize: '10px', fontWeight: '600', marginBottom: '8px' }}>COMPOSITE INDEXES</div>
            <div style={{ display: 'flex', flexDirection: 'column', gap: '6px' }}>
              {[
                '[brand360Id, category, isActive]',
                '[brand360Id, status, priority]',
                '[scanId, platform]'
              ].map((idx) => (
                <code key={idx} style={{
                  background: '#0F172A',
                  color: '#22C55E',
                  padding: '4px 8px',
                  borderRadius: '4px',
                  fontSize: '10px'
                }}>{idx}</code>
              ))}
            </div>
          </div>

          {/* External Services */}
          <div style={{
            background: '#1A1F2E',
            borderRadius: '16px',
            border: '1px solid #F59E0B',
            padding: '20px'
          }}>
            <div style={{ color: '#F59E0B', fontSize: '12px', fontWeight: '700', letterSpacing: '1px', marginBottom: '16px' }}>
              EXTERNAL SERVICES
            </div>
            <div style={{ display: 'flex', flexDirection: 'column', gap: '10px' }}>
              {[
                { name: 'OpenAI API', desc: 'GPT-4o-mini, GPT-4o', color: '#10B981' },
                { name: 'Firecrawl API', desc: 'Web crawling', color: '#F59E0B' },
                { name: 'Claude API', desc: 'Anthropic', color: '#EA580C' },
                { name: 'Google Knowledge Graph', desc: 'Entity verification', color: '#4285F4' }
              ].map((svc) => (
                <div key={svc.name} style={{
                  background: `linear-gradient(135deg, ${svc.color}20, ${svc.color}10)`,
                  borderRadius: '8px',
                  padding: '10px 12px',
                  borderLeft: `3px solid ${svc.color}`
                }}>
                  <div style={{ color: '#E2E8F0', fontSize: '12px', fontWeight: '500' }}>{svc.name}</div>
                  <div style={{ color: '#64748B', fontSize: '10px' }}>{svc.desc}</div>
                </div>
              ))}
            </div>
          </div>
        </div>

        {/* GCP & Real-time Events */}
        <div style={{ display: 'grid', gridTemplateColumns: '2fr 1fr', gap: '24px' }}>
          {/* GCP */}
          <div style={{
            background: '#1A1F2E',
            borderRadius: '16px',
            border: '1px solid #4285F4',
            padding: '20px'
          }}>
            <div style={{
              display: 'flex',
              alignItems: 'center',
              gap: '12px',
              marginBottom: '16px'
            }}>
              <div style={{
                width: '32px',
                height: '32px',
                background: 'linear-gradient(135deg, #4285F4 25%, #34A853 25%, #34A853 50%, #FBBC05 50%, #FBBC05 75%, #EA4335 75%)',
                borderRadius: '6px'
              }} />
              <div style={{ color: '#F8FAFC', fontWeight: '700', fontSize: '14px' }}>Google Cloud Platform</div>
            </div>
            <div style={{ display: 'grid', gridTemplateColumns: 'repeat(3, 1fr)', gap: '10px' }}>
              {[
                { name: 'Cloud Run', desc: 'Containerized Next.js' },
                { name: 'Cloud Build', desc: 'CI/CD pipeline' },
                { name: 'Secret Manager', desc: 'API keys, URLs' },
                { name: 'Cloud Logging', desc: 'Application logs' },
                { name: 'Cloud Monitoring', desc: 'Metrics, alerts' },
                { name: 'Container Registry', desc: 'Docker images' }
              ].map((item) => (
                <div key={item.name} style={{
                  background: '#0F172A',
                  borderRadius: '8px',
                  padding: '10px',
                  textAlign: 'center'
                }}>
                  <div style={{ color: '#E2E8F0', fontSize: '11px', fontWeight: '500' }}>{item.name}</div>
                  <div style={{ color: '#64748B', fontSize: '9px' }}>{item.desc}</div>
                </div>
              ))}
            </div>
          </div>

          {/* Real-time Events */}
          <div style={{
            background: '#1A1F2E',
            borderRadius: '16px',
            border: '1px solid #EC4899',
            padding: '20px'
          }}>
            <div style={{ color: '#EC4899', fontSize: '12px', fontWeight: '700', letterSpacing: '1px', marginBottom: '16px' }}>
              REAL-TIME EVENTS
            </div>
            <div style={{ display: 'flex', flexDirection: 'column', gap: '8px' }}>
              {[
                'scan:started',
                'scan:progress',
                'scan:complete',
                'scan:error',
                'insight:new',
                'correction:update'
              ].map((evt) => (
                <code key={evt} style={{
                  background: '#0F172A',
                  color: '#EC4899',
                  padding: '6px 10px',
                  borderRadius: '6px',
                  fontSize: '11px'
                }}>{evt}</code>
              ))}
            </div>
          </div>
        </div>

        {/* Legend */}
        <div style={{
          marginTop: '32px',
          display: 'flex',
          justifyContent: 'center',
          gap: '32px',
          flexWrap: 'wrap'
        }}>
          <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>
            <div style={{ width: '32px', height: '2px', background: '#3B82F6' }} />
            <span style={{ color: '#64748B', fontSize: '12px' }}>HTTPS</span>
          </div>
          <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>
            <div style={{ width: '32px', height: '2px', background: '#8B5CF6', borderStyle: 'dashed' }} />
            <span style={{ color: '#64748B', fontSize: '12px' }}>WebSocket</span>
          </div>
          <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>
            <div style={{ width: '32px', height: '2px', background: '#EF4444' }} />
            <span style={{ color: '#64748B', fontSize: '12px' }}>Cache</span>
          </div>
        </div>
      </div>
    </div>
  );
};

    ReactDOM.createRoot(document.getElementById("root")).render(<Component />);
  </script>
</body>
</html>
